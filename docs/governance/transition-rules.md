# Transition Rules

## Scope
본 문서는 시스템에서 상태 전이를 발생시킬 수 있는
규칙의 허용 범주를 정의한다.

본 문서에 정의되지 않은 사유로는
어떠한 상태 전이도 발생하지 않는다.

---

## Allowed Transition Rule Categories

### 1. Threshold-based Rules
- 수치형 상태 값이 사전에 정의된 임계값을 초과하거나 미만일 경우
- 임계값은 설계 시점에 고정되며, 런타임에서 조정되지 않는다

> 관측 가능한 값에 대한 조건 평가만 허용한다.

### 2. Time-based Rules
- 특정 상태가 정의된 시간 이상 지속될 경우
- 상태 유지 시간은 전이 조건의 입력값으로만 사용된다

> 시간 경과는 판단이 아닌 조건으로 취급한다.

### 3. Consistency / Integrity Rules
- 상태 간 논리적 불일치가 감지될 경우
- 필수 상태 값 누락 또는 무결성 위반이 발생한 경우

> 의미 해석이 아닌 정합성 위반만을 전이 조건으로 허용한다.

### 4. External Validity Rules
- 외부 입력이 사전 정의된 스키마를 벗어날 경우
- 외부 이벤트의 출처 또는 형식이 검증되지 않을 경우

> 외부 입력에 대한 신뢰성 검증 실패를 전이 사유로 사용한다.

---

## Explicitly Disallowed Transition Causes
- 상태의 의미적 해석
- 상태 변화의 목적적 해석
- 모델 기반 추론 결과가 상태 전이의 직접 원인이 되는 모든 경우
- 인간의 판단이 코드, 규칙, 입력으로 명시되지 않은 상태에서, 전이 조건에 영향을 미치는 모든 개입

---

## Enforcement Rules
- 하나의 입력이 복수 규칙 범주에 동시에 해당할 경우, 자동 전이는 중단되고 `HUMAN_REQUIRED` 상태로 전이한다.
- 규칙 평가 결과가 불확실하거나 판정 불가한 경우, 자동 전이는 수행되지 않는다.
---

## Relationship to Other Governance Documents
- 본 문서는 `decision-boundary.md`를 침범하지 않는다.
- 모든 전이는 `state-definition.md`에 정의된 상태 값만을 사용한다.
- 본 문서에 정의되지 않은 전이 규칙은 구현하지 않는다.

---

## Change Policy
다음 항목 중 하나라도 변경되는 경우, 이는 전이 규칙 설계 변경으로 간주한다.

- 허용되는 전이 규칙 범주의 추가 또는 제거
- 규칙 평가 결과가 상태 전이를 발생시키는 용도 외에, 추가적인 판단 또는 결정의 입력값으로 사용되는 경우  
  (규칙은 판단 신호가 아니라 전이 조건 검사 도구로만 사용된다)

- 규칙 평가 결과를 자동 최적화, 임계값 조정, 또는 학습 입력으로 사용하는 경우  
  (규칙은 성과 지표나 학습 대상이 아니며, 자동 변경되지 않는다)
  
모든 변경은 별도의 결정 로그에 기록한다.
